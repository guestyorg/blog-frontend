{"ast":null,"code":"var _jsxFileName = \"/Users/giladdekel/Workspace/Guesty/simple-app-archive/src/screens/Post/PostEditScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { NavLink, useParams } from \"react-router-dom\";\nimport Resource from \"@guestyci/agni\";\nimport RaisedButton from \"@guestyci/foundation/RaisedButton\";\nimport { Form as FinalForm, Field } from \"react-final-form\";\nimport Form from \"@guestyci/foundation/Form\";\nimport Input from \"@guestyci/foundation/Input\";\nimport DateRangePicker from \"@guestyci/foundation/DatePicker/DateRangePicker\";\nimport SingleDatePicker from \"@guestyci/foundation/DatePicker/SingleDatePicker\";\nimport NumberPicker from \"@guestyci/foundation/NumberPicker\";\nimport EmailInput from \"@guestyci/foundation/EmailInput\";\nimport Dropdown, { Option } from \"@guestyci/foundation/Dropdown\";\nimport TextField from \"@guestyci/foundation/TextField\";\nimport TextArea from \"@guestyci/foundation/TextArea\";\nimport Col from \"@guestyci/foundation/Layout/Col\";\nimport Section from \"@guestyci/foundation/Layout/Section\";\nimport DurationPicker from \"@guestyci/foundation/DurationPicker\";\nimport TimePicker from \"@guestyci/foundation/TimePicker\";\nimport FormField from \"@guestyci/foundation/FormField\";\nimport FormGroup from \"@guestyci/foundation/FormGroup\";\nimport { FormProvider } from \"@guestyci/foundation/enums\"; // import { email } from \"@guestyci/foundation/validators\";\n\nimport createStyles from \"@guestyci/foundation/createStyles\";\nimport FlatButton from \"@guestyci/foundation/FlatButton\";\nimport { Row } from \"@guestyci/foundation/Layout\";\nimport { ReactComponent as BtnTrash } from \"@svgr/webpack?-svgo,+titleProp,+ref!@guestyci/foundation/icons/BtnTrash.svg\";\nimport Icon from \"@guestyci/foundation/Icon\";\nimport { useToast } from \"@guestyci/foundation/Toast\";\nimport { deletePost, detailsPost, updatePost } from \"../../actions/blogActions\";\nimport { POST_DELETE_RESET, POST_DETAILS_RESET, POST_UPDATE_RESET } from \"../../constants/blogConstants\"; // posts\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = createStyles(theme => ({\n  app: {\n    backgroundColor: \"white\"\n  }\n}));\nexport default function PostEditScreen(props) {\n  _s();\n\n  const classes = useStyles();\n  const {\n    addToast\n  } = useToast(); // const { api, env, config } = Resource.create();\n\n  const {\n    blogId,\n    postId\n  } = useParams(); // console.log(\"id:\", id);\n\n  const [title, setTitle] = useState(); /////\n\n  const [content, setContent] = useState(); /////\n\n  const [error, setError] = useState(false);\n  const errorMessage = \"There was a problem edit the post.\"; // useSelector\n\n  const postDetails = useSelector(state => state.postDetails);\n  const {\n    loading,\n    error: errorPostDetails,\n    post\n  } = postDetails;\n  const postUpdate = useSelector(state => state.postUpdate);\n  const {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdate\n  } = postUpdate;\n  const postDelete = useSelector(state => state.postDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete\n  } = postDelete; // useDispatch\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (successDelete) {\n      dispatch({\n        type: POST_DELETE_RESET\n      });\n      dispatch({\n        type: POST_DETAILS_RESET\n      });\n      props.history.push(`/blog/edit/${blogId}`);\n      addToast.success(`the post ${title} was delete`);\n    } else if (errorDelete) {\n      addToast.danger(\"error edit the post\");\n    }\n\n    if (successUpdate) {\n      dispatch({\n        type: POST_UPDATE_RESET\n      });\n      dispatch({\n        type: POST_DETAILS_RESET\n      }); // props.history.push(\"/post/list\");\n\n      addToast.success(`the post ${title} was edit`);\n    } else if (errorUpdate) {\n      addToast.danger(\"error edit the post\");\n    }\n\n    if (!post) {\n      dispatch(detailsPost(blogId, postId));\n    } else {\n      setTitle(post.post.title); ////\n\n      setContent(post.post.content);\n    }\n  }, [dispatch, props.history, successUpdate, successDelete, post, blogId, postId]);\n  useEffect(() => {\n    dispatch({\n      type: POST_DETAILS_RESET\n    });\n  }, []);\n\n  const onSubmit = e => {\n    // e.preventDefault();\n    // dispatch update post\n    dispatch(updatePost({\n      blogId,\n      postId,\n      title,\n      content\n    }));\n  };\n\n  const handleDelete = async () => {\n    console.log(\"handleDelete\");\n\n    if (window.confirm(\"Are you sure?\")) {\n      dispatch(deletePost(blogId, postId));\n    }\n  };\n\n  const closeError = () => {\n    setError(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Section, {\n      className: classes.app,\n      justify: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        spacing: 6,\n        span: 6,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          variant: \"h2\",\n          children: [\"Edit the Post:\", title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FinalForm, {\n          onSubmit: onSubmit,\n          initialValues: {},\n          render: ({\n            handleSubmit\n          }) => /*#__PURE__*/_jsxDEV(Form, {\n            title: \"Edit Post\",\n            onSubmit: handleSubmit,\n            provider: FormProvider.Final,\n            fieldInstance: Field,\n            children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n              children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n                children: [/*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"title\",\n                  name: \"title\" //   info=\"Drama, Action etc.\"\n                  ,\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    name: \"title\",\n                    value: title,\n                    placeholder: title,\n                    onChange: e => setTitle(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(FormField, {\n                  label: \"content\",\n                  name: \"content\" //   info=\"Drama, Action etc.\"\n                  ,\n                  children: /*#__PURE__*/_jsxDEV(TextArea, {\n                    name: \"content\",\n                    placeholder: content,\n                    value: content,\n                    onChange: e => setContent(e.target.value),\n                    minRows: 100 // maxRows={15}\n\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(RaisedButton, {\n                type: \"submit\",\n                children: \"Edit Post\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FlatButton, {\n                type: \"error\",\n                onClick: handleDelete,\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  align: \"center\",\n                  spacing: 2,\n                  children: [/*#__PURE__*/_jsxDEV(Icon, {\n                    svg: BtnTrash\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                    children: \" Delete Post\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 19\n              }, this), error && /*#__PURE__*/_jsxDEV(ErrorBanner, {\n                show: error,\n                errorMessage: errorMessage,\n                onClick: closeError,\n                actionText: \"Try again\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n              to: `/${blogId}/post/${postId}/view` // activeStyle={activeStyle}\n              ,\n              style: {\n                marginLeft: \"20px\"\n              },\n              exact: true,\n              children: \"view post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(PostEditScreen, \"vKV2iWmHScSgFMObuyvRLi4AEFw=\", false, function () {\n  return [useStyles, useToast, useParams, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = PostEditScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostEditScreen\");","map":{"version":3,"sources":["/Users/giladdekel/Workspace/Guesty/simple-app-archive/src/screens/Post/PostEditScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","NavLink","useParams","Resource","RaisedButton","Form","FinalForm","Field","Input","DateRangePicker","SingleDatePicker","NumberPicker","EmailInput","Dropdown","Option","TextField","TextArea","Col","Section","DurationPicker","TimePicker","FormField","FormGroup","FormProvider","createStyles","FlatButton","Row","Icon","useToast","deletePost","detailsPost","updatePost","POST_DELETE_RESET","POST_DETAILS_RESET","POST_UPDATE_RESET","useStyles","theme","app","backgroundColor","PostEditScreen","props","classes","addToast","blogId","postId","title","setTitle","content","setContent","error","setError","errorMessage","postDetails","state","loading","errorPostDetails","post","postUpdate","loadingUpdate","errorUpdate","success","successUpdate","postDelete","loadingDelete","errorDelete","successDelete","dispatch","type","history","push","danger","onSubmit","e","handleDelete","console","log","window","confirm","closeError","handleSubmit","Final","target","value","BtnTrash","marginLeft"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { NavLink, useParams } from \"react-router-dom\";\n\nimport Resource from \"@guestyci/agni\";\n\nimport RaisedButton from \"@guestyci/foundation/RaisedButton\";\n\nimport { Form as FinalForm, Field } from \"react-final-form\";\n\nimport Form from \"@guestyci/foundation/Form\";\nimport Input from \"@guestyci/foundation/Input\";\nimport DateRangePicker from \"@guestyci/foundation/DatePicker/DateRangePicker\";\nimport SingleDatePicker from \"@guestyci/foundation/DatePicker/SingleDatePicker\";\nimport NumberPicker from \"@guestyci/foundation/NumberPicker\";\nimport EmailInput from \"@guestyci/foundation/EmailInput\";\nimport Dropdown, { Option } from \"@guestyci/foundation/Dropdown\";\nimport TextField from \"@guestyci/foundation/TextField\";\nimport TextArea from \"@guestyci/foundation/TextArea\";\nimport Col from \"@guestyci/foundation/Layout/Col\";\nimport Section from \"@guestyci/foundation/Layout/Section\";\nimport DurationPicker from \"@guestyci/foundation/DurationPicker\";\nimport TimePicker from \"@guestyci/foundation/TimePicker\";\n\nimport FormField from \"@guestyci/foundation/FormField\";\nimport FormGroup from \"@guestyci/foundation/FormGroup\";\nimport { FormProvider } from \"@guestyci/foundation/enums\";\n// import { email } from \"@guestyci/foundation/validators\";\nimport createStyles from \"@guestyci/foundation/createStyles\";\n\nimport FlatButton from \"@guestyci/foundation/FlatButton\";\nimport { Row } from \"@guestyci/foundation/Layout\";\nimport { ReactComponent as BtnTrash } from \"@guestyci/foundation/icons/BtnTrash.svg\";\nimport Icon from \"@guestyci/foundation/Icon\";\n\nimport { useToast } from \"@guestyci/foundation/Toast\";\nimport { deletePost, detailsPost, updatePost } from \"../../actions/blogActions\";\nimport {\n  POST_DELETE_RESET,\n  POST_DETAILS_RESET,\n  POST_UPDATE_RESET,\n} from \"../../constants/blogConstants\";\n\n// posts\n\nconst useStyles = createStyles((theme) => ({\n  app: {\n    backgroundColor: \"white\",\n  },\n}));\n\nexport default function PostEditScreen(props) {\n  const classes = useStyles();\n\n  const { addToast } = useToast();\n\n  // const { api, env, config } = Resource.create();\n\n  const { blogId, postId } = useParams();\n  // console.log(\"id:\", id);\n\n  const [title, setTitle] = useState();\n\n  /////\n  const [content, setContent] = useState();\n  /////\n  const [error, setError] = useState(false);\n\n  const errorMessage = \"There was a problem edit the post.\";\n\n  // useSelector\n  const postDetails = useSelector((state) => state.postDetails);\n  const { loading, error: errorPostDetails, post } = postDetails;\n\n  const postUpdate = useSelector((state) => state.postUpdate);\n  const {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdate,\n  } = postUpdate;\n\n  const postDelete = useSelector((state) => state.postDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } = postDelete;\n\n  // useDispatch\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (successDelete) {\n      dispatch({ type: POST_DELETE_RESET });\n      dispatch({ type: POST_DETAILS_RESET });\n      props.history.push(`/blog/edit/${blogId}`);\n      addToast.success(`the post ${title} was delete`);\n    } else if (errorDelete) {\n      addToast.danger(\"error edit the post\");\n    }\n    if (successUpdate) {\n      dispatch({ type: POST_UPDATE_RESET });\n      dispatch({ type: POST_DETAILS_RESET });\n\n      // props.history.push(\"/post/list\");\n      addToast.success(`the post ${title} was edit`);\n    } else if (errorUpdate) {\n      addToast.danger(\"error edit the post\");\n    }\n    if (!post) {\n      dispatch(detailsPost(blogId, postId));\n    } else {\n      setTitle(post.post.title);\n      ////\n      setContent(post.post.content);\n    }\n  }, [\n    dispatch,\n    props.history,\n    successUpdate,\n    successDelete,\n    post,\n    blogId,\n    postId,\n  ]);\n\n  useEffect(() => {\n    dispatch({ type: POST_DETAILS_RESET });\n  }, []);\n\n  const onSubmit = (e) => {\n    // e.preventDefault();\n    // dispatch update post\n    dispatch(updatePost({ blogId, postId, title, content }));\n  };\n\n  const handleDelete = async () => {\n    console.log(\"handleDelete\");\n    if (window.confirm(\"Are you sure?\")) {\n      dispatch(deletePost(blogId, postId));\n    }\n  };\n\n  const closeError = () => {\n    setError(false);\n  };\n\n  return (\n    <>\n      <Section className={classes.app} justify=\"center\">\n        <Col spacing={6} span={6}>\n          <TextField variant=\"h2\">\n            Edit the Post:\n            {title}\n          </TextField>\n          <FinalForm\n            onSubmit={onSubmit}\n            initialValues={{}}\n            render={({ handleSubmit }) => (\n              <Form\n                title=\"Edit Post\"\n                onSubmit={handleSubmit}\n                provider={FormProvider.Final}\n                fieldInstance={Field}\n              >\n                <FormGroup>\n                  <FormGroup>\n                    <FormField\n                      label=\"title\"\n                      name=\"title\"\n                      //   info=\"Drama, Action etc.\"\n                    >\n                      <Input\n                        name=\"title\"\n                        value={title}\n                        placeholder={title}\n                        onChange={(e) => setTitle(e.target.value)}\n                      />\n                    </FormField>\n\n                    <FormField\n                      label=\"content\"\n                      name=\"content\"\n                      //   info=\"Drama, Action etc.\"\n                    >\n                      {/* <Input\n                        name=\"content\"\n                        value={content}\n                        placeholder={content}\n                        onChange={(e) => setContent(e.target.value)}\n                      /> */}\n                      <TextArea\n                        name=\"content\"\n                        placeholder={content}\n                        value={content}\n                        onChange={(e) => setContent(e.target.value)}\n                        minRows={100}\n                        // maxRows={15}\n                      />\n                    </FormField>\n\n                    {/* <TextField>content</TextField> */}\n                  </FormGroup>\n\n                  <RaisedButton type=\"submit\">Edit Post</RaisedButton>\n\n                  <FlatButton type=\"error\" onClick={handleDelete}>\n                    <Row align=\"center\" spacing={2}>\n                      <Icon svg={BtnTrash} />\n                      <TextField> Delete Post</TextField>\n                    </Row>\n                  </FlatButton>\n\n                  {error && (\n                    <ErrorBanner\n                      show={error}\n                      errorMessage={errorMessage}\n                      onClick={closeError}\n                      actionText=\"Try again\"\n                    />\n                  )}\n                </FormGroup>\n\n                <NavLink\n                  to={`/${blogId}/post/${postId}/view`}\n                  // activeStyle={activeStyle}\n                  style={{ marginLeft: \"20px\" }}\n                  exact\n                >\n                  view post\n                </NavLink>\n              </Form>\n            )}\n          />\n        </Col>\n      </Section>\n      {/* /////////////////////// posts//////////////////  */}\n      {/* <PostList postId={id} /> */}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}