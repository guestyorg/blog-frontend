{"ast":null,"code":"var _jsxFileName = \"/Users/giladdekel/Workspace/Guesty/boilplate/simple-app/simple-app-archive/src/screens/UserListScreen/UserListScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { deleteUser, listUsers } from \"./../../actions/userActions\";\nimport { USER_DETAILS_RESET } from \"./../../constants/userConstants\";\nimport Section from \"@guestyci/foundation/legacy/Section\";\nimport AddButton from \"@guestyci/foundation/AddButton\";\nimport Table, { Column } from \"@guestyci/foundation/legacy/Table\";\nimport { getEmptySelection, getSelectionOnAction } from \"@guestyci/foundation/legacy/Table/tableUtility\";\nimport Cell from \"@guestyci/foundation/legacy/Table/Cell\";\nimport HeaderCell from \"@guestyci/foundation/legacy/Table/HeaderCell\";\nimport FlatButton from \"@guestyci/foundation/legacy/FlatButton\";\nimport { sleep } from \"@guestyci/foundation/utils/commonUtility\";\nimport orderBy from \"lodash/orderBy\";\nimport DateCell from \"@guestyci/foundation/legacy/Table/DateCell\";\nimport DateTimeCell from \"@guestyci/foundation/legacy/Table/DateTimeCell\"; // import data from '../../../__mocks__/tableData';\n\nimport Resource from \"@guestyci/agni\";\nimport TextField from \"@guestyci/foundation/TextField\";\nimport { Row } from \"@guestyci/foundation/Layout\";\nimport { ReactComponent as BtnTrash } from \"@svgr/webpack?-svgo,+titleProp,+ref!@guestyci/foundation/icons/BtnTrash.svg\";\nimport Icon from \"@guestyci/foundation/Icon\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function UserListScreen(props) {\n  _s();\n\n  const [rawData, setRawData] = useState(); // const [data, setData] = useState();\n\n  let data;\n  const [userDeleted, setUserDeleted] = useState(false);\n  const [rowSelection, setRowSelection] = useState(getEmptySelection());\n  const {\n    allSelected,\n    items,\n    exceptItems\n  } = rowSelection;\n  const width = 200; // const pageSize = 25;\n  // const scrollOffset = data ? data.length : 100;\n  // const [isLoading, setIsLoading] = useState(false);\n  // const [skip, setSkip] = useState(0);\n\n  const selectionSize = allSelected && arr.length > 0 ? arr.length - exceptItems.size : items.size;\n\n  const handleRowCheckChange = action => {\n    console.log(\"handleRowCheckChange\"); // console.log('action:', action);\n\n    const selection = getSelectionOnAction({\n      rowSelection,\n      action,\n      data\n    }); // console.log('selection:', selection);\n\n    setRowSelection(selection);\n  };\n\n  const deleteUser = async userId => {\n    console.log(\"deleteUser\");\n\n    try {\n      // const response = await api.delete(`/users/${userId}`); // will go to `${config.MAILER_URL}/users`\n      // console.log('response:', response);\n      // const data = response.data;\n      // addToast.success('user was delete')\n      setUserDeleted(true); // props.history.push('/');\n\n      handleClearSelection();\n    } catch (error) {\n      console.log(\"error:\", error); // addToast.danger(\"error deleting the user\")\n    }\n  };\n\n  const handleDelete = () => {\n    console.log(rowSelection.items);\n\n    if (window.confirm(\"Are you sure?\")) {\n      rowSelection.items.forEach(item => deleteUser(item));\n    }\n  };\n\n  const handleClearSelection = () => {\n    console.log(\"handleClearSelection\");\n    setRowSelection(getEmptySelection());\n  };\n\n  const handleRowClick = (...args) => {\n    console.log(\"handleRowClick\", ...args);\n    const rowData = { ...args\n    };\n    console.log(\"rowData:\", rowData);\n    console.log(\"rowData:\", rowData[0].id.children);\n    const userId = rowData[0].id.children; // console.log('args:', args.id)\n    // props.history.push(\"www.google.com\")\n\n    props.history.push(`/user/edit/${userId}`);\n  };\n\n  const userList = useSelector(state => state.userList);\n  const {\n    loading,\n    error,\n    users\n  } = userList;\n  console.log(\"users:\", users);\n  data = users;\n  const userDelete = useSelector(state => state.userDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete\n  } = userDelete;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(listUsers());\n    dispatch({\n      type: USER_DETAILS_RESET\n    });\n  }, [dispatch, successDelete]);\n\n  const deleteHandler = user => {\n    console.log(\"user:\", user);\n\n    if (window.confirm(\"Are you sure?\")) {\n      dispatch(deleteUser(user._id));\n    }\n  }; // const classes = useStyles();\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [console.log(\"data:\", data), data && /*#__PURE__*/_jsxDEV(Section, {\n      col: true,\n      className: \"bg-white\",\n      children: [/*#__PURE__*/_jsxDEV(Section, {\n        gutter: 2,\n        children: /*#__PURE__*/_jsxDEV(AddButton, {\n          onClick: () => props.history.push(`/user/add`),\n          text: \"Add User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        spacing: 4,\n        children: [/*#__PURE__*/_jsxDEV(FlatButton, {\n          onClick: handleClearSelection,\n          disabled: !selectionSize,\n          children: `Unselect ${selectionSize || \"\"}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this), selectionSize > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(FlatButton, {\n            type: \"error\",\n            onClick: handleDelete,\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              align: \"center\",\n              spacing: 2,\n              children: [/*#__PURE__*/_jsxDEV(Icon, {\n                svg: BtnTrash\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                children: \" Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 17\n          }, this)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }, this), console.log(\"rowSelection: \", rowSelection), /*#__PURE__*/_jsxDEV(Table, {\n        multiselect: true,\n        height: 500,\n        data: users // isLoading={isLoading}\n        // pageSize={pageSize}\n        ,\n        rowSelection: rowSelection,\n        onCheckedRowsChange: handleRowCheckChange,\n        onRowClick: handleRowClick // infiniteScrollOptions={{\n        //   skip,\n        //   scrollOffset,\n        //   onLoadMore: handleLoadMore,\n        //   totalCount: semiInfiniteData.length,\n        // }}\n        // sortBy={sortBy}\n        // onSort={handleSort}\n        ,\n        children: [/*#__PURE__*/_jsxDEV(Column, {\n          align: \"left\",\n          dataKey: \"id\",\n          width: width,\n          sortable: true,\n          children: [/*#__PURE__*/_jsxDEV(HeaderCell, {\n            id: \"id\",\n            children: \"Id\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Cell, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          dataKey: \"firstName\",\n          width: width,\n          children: [/*#__PURE__*/_jsxDEV(HeaderCell, {\n            id: \"firstname\",\n            children: \"First name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Cell, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          dataKey: \"lastName\",\n          width: width,\n          children: [/*#__PURE__*/_jsxDEV(HeaderCell, {\n            id: \"lastname\",\n            children: \"Last name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Cell, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          dataKey: \"email\",\n          width: width,\n          children: [/*#__PURE__*/_jsxDEV(HeaderCell, {\n            id: \"email\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Cell, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          dataKey: \"createdAt\",\n          width: width,\n          children: [/*#__PURE__*/_jsxDEV(HeaderCell, {\n            id: \"createdAt\",\n            children: \"created At\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Cell, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(UserListScreen, \"u8AS2Hu5aLGqqD+lvABcMAlcc6k=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n\n_c = UserListScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserListScreen\");","map":{"version":3,"sources":["/Users/giladdekel/Workspace/Guesty/boilplate/simple-app/simple-app-archive/src/screens/UserListScreen/UserListScreen.js"],"names":["React","useState","useEffect","useCallback","useDispatch","useSelector","deleteUser","listUsers","USER_DETAILS_RESET","Section","AddButton","Table","Column","getEmptySelection","getSelectionOnAction","Cell","HeaderCell","FlatButton","sleep","orderBy","DateCell","DateTimeCell","Resource","TextField","Row","Icon","UserListScreen","props","rawData","setRawData","data","userDeleted","setUserDeleted","rowSelection","setRowSelection","allSelected","items","exceptItems","width","selectionSize","arr","length","size","handleRowCheckChange","action","console","log","selection","userId","handleClearSelection","error","handleDelete","window","confirm","forEach","item","handleRowClick","args","rowData","id","children","history","push","userList","state","loading","users","userDelete","loadingDelete","errorDelete","success","successDelete","dispatch","type","deleteHandler","user","_id","BtnTrash"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,WAArC,QAAwD,OAAxD;AAEA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,6BAAtC;AACA,SAASC,kBAAT,QAAmC,iCAAnC;AAEA,OAAOC,OAAP,MAAoB,qCAApB;AACA,OAAOC,SAAP,MAAsB,gCAAtB;AAEA,OAAOC,KAAP,IAAgBC,MAAhB,QAA8B,mCAA9B;AACA,SACEC,iBADF,EAEEC,oBAFF,QAGO,gDAHP;AAIA,OAAOC,IAAP,MAAiB,wCAAjB;AACA,OAAOC,UAAP,MAAuB,8CAAvB;AACA,OAAOC,UAAP,MAAuB,wCAAvB;AAEA,SAASC,KAAT,QAAsB,0CAAtB;AAEA,OAAOC,OAAP,MAAoB,gBAApB;AAEA,OAAOC,QAAP,MAAqB,4CAArB;AACA,OAAOC,YAAP,MAAyB,gDAAzB,C,CAEA;;AAEA,OAAOC,QAAP,MAAqB,gBAArB;AAEA,OAAOC,SAAP,MAAsB,gCAAtB;AACA,SAASC,GAAT,QAAoB,6BAApB;;AAEA,OAAOC,IAAP,MAAiB,2BAAjB;;;AAEA,eAAe,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAAA;;AAC5C,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwB5B,QAAQ,EAAtC,CAD4C,CAE5C;;AAEA,MAAI6B,IAAJ;AAEA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgC/B,QAAQ,CAAC,KAAD,CAA9C;AAEA,QAAM,CAACgC,YAAD,EAAeC,eAAf,IAAkCjC,QAAQ,CAACY,iBAAiB,EAAlB,CAAhD;AACA,QAAM;AAAEsB,IAAAA,WAAF;AAAeC,IAAAA,KAAf;AAAsBC,IAAAA;AAAtB,MAAsCJ,YAA5C;AAEA,QAAMK,KAAK,GAAG,GAAd,CAX4C,CAY5C;AACA;AACA;AACA;;AAEA,QAAMC,aAAa,GACjBJ,WAAW,IAAIK,GAAG,CAACC,MAAJ,GAAa,CAA5B,GAAgCD,GAAG,CAACC,MAAJ,GAAaJ,WAAW,CAACK,IAAzD,GAAgEN,KAAK,CAACM,IADxE;;AAGA,QAAMC,oBAAoB,GAAIC,MAAD,IAAY;AACvCC,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EADuC,CAEvC;;AAEA,UAAMC,SAAS,GAAGjC,oBAAoB,CAAC;AAAEmB,MAAAA,YAAF;AAAgBW,MAAAA,MAAhB;AAAwBd,MAAAA;AAAxB,KAAD,CAAtC,CAJuC,CAKvC;;AACAI,IAAAA,eAAe,CAACa,SAAD,CAAf;AACD,GAPD;;AASA,QAAMzC,UAAU,GAAG,MAAO0C,MAAP,IAAkB;AACnCH,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;;AACA,QAAI;AACF;AACA;AACA;AACA;AACAd,MAAAA,cAAc,CAAC,IAAD,CAAd,CALE,CAMF;;AAEAiB,MAAAA,oBAAoB;AACrB,KATD,CASE,OAAOC,KAAP,EAAc;AACdL,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBI,KAAtB,EADc,CAEd;AACD;AACF,GAfD;;AAiBA,QAAMC,YAAY,GAAG,MAAM;AACzBN,IAAAA,OAAO,CAACC,GAAR,CAAYb,YAAY,CAACG,KAAzB;;AAEA,QAAIgB,MAAM,CAACC,OAAP,CAAe,eAAf,CAAJ,EAAqC;AACnCpB,MAAAA,YAAY,CAACG,KAAb,CAAmBkB,OAAnB,CAA4BC,IAAD,IAAUjD,UAAU,CAACiD,IAAD,CAA/C;AACD;AACF,GAND;;AAQA,QAAMN,oBAAoB,GAAG,MAAM;AACjCJ,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAZ,IAAAA,eAAe,CAACrB,iBAAiB,EAAlB,CAAf;AACD,GAHD;;AAKA,QAAM2C,cAAc,GAAG,CAAC,GAAGC,IAAJ,KAAa;AAClCZ,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8B,GAAGW,IAAjC;AAEA,UAAMC,OAAO,GAAG,EAAE,GAAGD;AAAL,KAAhB;AACAZ,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBY,OAAxB;AACAb,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBY,OAAO,CAAC,CAAD,CAAP,CAAWC,EAAX,CAAcC,QAAtC;AAEA,UAAMZ,MAAM,GAAGU,OAAO,CAAC,CAAD,CAAP,CAAWC,EAAX,CAAcC,QAA7B,CAPkC,CAQlC;AAEA;;AAEAjC,IAAAA,KAAK,CAACkC,OAAN,CAAcC,IAAd,CAAoB,cAAad,MAAO,EAAxC;AACD,GAbD;;AAeA,QAAMe,QAAQ,GAAG1D,WAAW,CAAE2D,KAAD,IAAWA,KAAK,CAACD,QAAlB,CAA5B;AACA,QAAM;AAAEE,IAAAA,OAAF;AAAWf,IAAAA,KAAX;AAAkBgB,IAAAA;AAAlB,MAA4BH,QAAlC;AACAlB,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBoB,KAAtB;AACApC,EAAAA,IAAI,GAAGoC,KAAP;AACA,QAAMC,UAAU,GAAG9D,WAAW,CAAE2D,KAAD,IAAWA,KAAK,CAACG,UAAlB,CAA9B;AACA,QAAM;AACJF,IAAAA,OAAO,EAAEG,aADL;AAEJlB,IAAAA,KAAK,EAAEmB,WAFH;AAGJC,IAAAA,OAAO,EAAEC;AAHL,MAIFJ,UAJJ;AAMA,QAAMK,QAAQ,GAAGpE,WAAW,EAA5B;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACdsE,IAAAA,QAAQ,CAACjE,SAAS,EAAV,CAAR;AACAiE,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEjE;AADC,KAAD,CAAR;AAGD,GALQ,EAKN,CAACgE,QAAD,EAAWD,aAAX,CALM,CAAT;;AAOA,QAAMG,aAAa,GAAIC,IAAD,IAAU;AAC9B9B,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB6B,IAArB;;AACA,QAAIvB,MAAM,CAACC,OAAP,CAAe,eAAf,CAAJ,EAAqC;AACnCmB,MAAAA,QAAQ,CAAClE,UAAU,CAACqE,IAAI,CAACC,GAAN,CAAX,CAAR;AACD;AACF,GALD,CA9F4C,CAqG5C;;;AAEA,sBACE;AAAA,eACG/B,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBhB,IAArB,CADH,EAEGA,IAAI,iBACH,QAAC,OAAD;AAAS,MAAA,GAAG,MAAZ;AAAa,MAAA,SAAS,EAAC,UAAvB;AAAA,8BACE,QAAC,OAAD;AAAS,QAAA,MAAM,EAAE,CAAjB;AAAA,+BACE,QAAC,SAAD;AACE,UAAA,OAAO,EAAE,MAAMH,KAAK,CAACkC,OAAN,CAAcC,IAAd,CAAoB,WAApB,CADjB;AAEE,UAAA,IAAI,EAAC;AAFP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAOE,QAAC,GAAD;AAAK,QAAA,OAAO,EAAE,CAAd;AAAA,gCACE,QAAC,UAAD;AACE,UAAA,OAAO,EAAEb,oBADX;AAEE,UAAA,QAAQ,EAAE,CAACV,aAFb;AAAA,oBAII,YAAWA,aAAa,IAAI,EAAG;AAJnC;AAAA;AAAA;AAAA;AAAA,gBADF,EAQGA,aAAa,GAAG,CAAhB,iBACC;AAAA,iCACE,QAAC,UAAD;AAAY,YAAA,IAAI,EAAC,OAAjB;AAAyB,YAAA,OAAO,EAAEY,YAAlC;AAAA,mCACE,QAAC,GAAD;AAAK,cAAA,KAAK,EAAC,QAAX;AAAoB,cAAA,OAAO,EAAE,CAA7B;AAAA,sCACE,QAAC,IAAD;AAAM,gBAAA,GAAG,EAAE0B;AAAX;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF,yBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAPF,EA2BGhC,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8Bb,YAA9B,CA3BH,eA4BE,QAAC,KAAD;AACE,QAAA,WAAW,MADb;AAEE,QAAA,MAAM,EAAE,GAFV;AAGE,QAAA,IAAI,EAAEiC,KAHR,CAIE;AACA;AALF;AAME,QAAA,YAAY,EAAEjC,YANhB;AAOE,QAAA,mBAAmB,EAAEU,oBAPvB;AAQE,QAAA,UAAU,EAAEa,cARd,CASE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBF;AAAA,gCAkBE,QAAC,MAAD;AAAQ,UAAA,KAAK,EAAC,MAAd;AAAqB,UAAA,OAAO,EAAC,IAA7B;AAAkC,UAAA,KAAK,EAAElB,KAAzC;AAAgD,UAAA,QAAQ,MAAxD;AAAA,kCACE,QAAC,UAAD;AAAY,YAAA,EAAE,EAAC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAlBF,eAsBE,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAC,WAAhB;AAA4B,UAAA,KAAK,EAAEA,KAAnC;AAAA,kCACE,QAAC,UAAD;AAAY,YAAA,EAAE,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAtBF,eA0BE,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAC,UAAhB;AAA2B,UAAA,KAAK,EAAEA,KAAlC;AAAA,kCACE,QAAC,UAAD;AAAY,YAAA,EAAE,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA1BF,eA8BE,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAC,OAAhB;AAAwB,UAAA,KAAK,EAAEA,KAA/B;AAAA,kCACE,QAAC,UAAD;AAAY,YAAA,EAAE,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA9BF,eAmCE,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAC,WAAhB;AAA4B,UAAA,KAAK,EAAEA,KAAnC;AAAA,kCACE,QAAC,UAAD;AAAY,YAAA,EAAE,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAnCF;AAAA;AAAA;AAAA;AAAA;AAAA,cA5BF;AAAA;AAAA;AAAA;AAAA;AAAA,YAHJ;AAAA,kBADF;AAqFD;;GA5LuBZ,c;UA0ELrB,W,EAIEA,W,EAOFD,W;;;KArFKsB,c","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { deleteUser, listUsers } from \"./../../actions/userActions\";\nimport { USER_DETAILS_RESET } from \"./../../constants/userConstants\";\n\nimport Section from \"@guestyci/foundation/legacy/Section\";\nimport AddButton from \"@guestyci/foundation/AddButton\";\n\nimport Table, { Column } from \"@guestyci/foundation/legacy/Table\";\nimport {\n  getEmptySelection,\n  getSelectionOnAction,\n} from \"@guestyci/foundation/legacy/Table/tableUtility\";\nimport Cell from \"@guestyci/foundation/legacy/Table/Cell\";\nimport HeaderCell from \"@guestyci/foundation/legacy/Table/HeaderCell\";\nimport FlatButton from \"@guestyci/foundation/legacy/FlatButton\";\n\nimport { sleep } from \"@guestyci/foundation/utils/commonUtility\";\n\nimport orderBy from \"lodash/orderBy\";\n\nimport DateCell from \"@guestyci/foundation/legacy/Table/DateCell\";\nimport DateTimeCell from \"@guestyci/foundation/legacy/Table/DateTimeCell\";\n\n// import data from '../../../__mocks__/tableData';\n\nimport Resource from \"@guestyci/agni\";\n\nimport TextField from \"@guestyci/foundation/TextField\";\nimport { Row } from \"@guestyci/foundation/Layout\";\nimport { ReactComponent as BtnTrash } from \"@guestyci/foundation/icons/BtnTrash.svg\";\nimport Icon from \"@guestyci/foundation/Icon\";\n\nexport default function UserListScreen(props) {\n  const [rawData, setRawData] = useState();\n  // const [data, setData] = useState();\n\n  let data;\n\n  const [userDeleted, setUserDeleted] = useState(false);\n\n  const [rowSelection, setRowSelection] = useState(getEmptySelection());\n  const { allSelected, items, exceptItems } = rowSelection;\n\n  const width = 200;\n  // const pageSize = 25;\n  // const scrollOffset = data ? data.length : 100;\n  // const [isLoading, setIsLoading] = useState(false);\n  // const [skip, setSkip] = useState(0);\n\n  const selectionSize =\n    allSelected && arr.length > 0 ? arr.length - exceptItems.size : items.size;\n\n  const handleRowCheckChange = (action) => {\n    console.log(\"handleRowCheckChange\");\n    // console.log('action:', action);\n\n    const selection = getSelectionOnAction({ rowSelection, action, data });\n    // console.log('selection:', selection);\n    setRowSelection(selection);\n  };\n\n  const deleteUser = async (userId) => {\n    console.log(\"deleteUser\");\n    try {\n      // const response = await api.delete(`/users/${userId}`); // will go to `${config.MAILER_URL}/users`\n      // console.log('response:', response);\n      // const data = response.data;\n      // addToast.success('user was delete')\n      setUserDeleted(true);\n      // props.history.push('/');\n\n      handleClearSelection();\n    } catch (error) {\n      console.log(\"error:\", error);\n      // addToast.danger(\"error deleting the user\")\n    }\n  };\n\n  const handleDelete = () => {\n    console.log(rowSelection.items);\n\n    if (window.confirm(\"Are you sure?\")) {\n      rowSelection.items.forEach((item) => deleteUser(item));\n    }\n  };\n\n  const handleClearSelection = () => {\n    console.log(\"handleClearSelection\");\n    setRowSelection(getEmptySelection());\n  };\n\n  const handleRowClick = (...args) => {\n    console.log(\"handleRowClick\", ...args);\n\n    const rowData = { ...args };\n    console.log(\"rowData:\", rowData);\n    console.log(\"rowData:\", rowData[0].id.children);\n\n    const userId = rowData[0].id.children;\n    // console.log('args:', args.id)\n\n    // props.history.push(\"www.google.com\")\n\n    props.history.push(`/user/edit/${userId}`);\n  };\n\n  const userList = useSelector((state) => state.userList);\n  const { loading, error, users } = userList;\n  console.log(\"users:\", users);\n  data = users;\n  const userDelete = useSelector((state) => state.userDelete);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete,\n  } = userDelete;\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(listUsers());\n    dispatch({\n      type: USER_DETAILS_RESET,\n    });\n  }, [dispatch, successDelete]);\n\n  const deleteHandler = (user) => {\n    console.log(\"user:\", user);\n    if (window.confirm(\"Are you sure?\")) {\n      dispatch(deleteUser(user._id));\n    }\n  };\n\n  // const classes = useStyles();\n\n  return (\n    <>\n      {console.log(\"data:\", data)}\n      {data && (\n        <Section col className=\"bg-white\">\n          <Section gutter={2}>\n            <AddButton\n              onClick={() => props.history.push(`/user/add`)}\n              text=\"Add User\"\n            />\n          </Section>\n          <Row spacing={4}>\n            <FlatButton\n              onClick={handleClearSelection}\n              disabled={!selectionSize}\n            >\n              {`Unselect ${selectionSize || \"\"}`}\n            </FlatButton>\n\n            {selectionSize > 0 && (\n              <>\n                <FlatButton type=\"error\" onClick={handleDelete}>\n                  <Row align=\"center\" spacing={2}>\n                    <Icon svg={BtnTrash} />\n                    <TextField> Delete</TextField>\n                  </Row>\n                </FlatButton>\n              </>\n            )}\n          </Row>\n\n          {console.log(\"rowSelection: \", rowSelection)}\n          <Table\n            multiselect\n            height={500}\n            data={users}\n            // isLoading={isLoading}\n            // pageSize={pageSize}\n            rowSelection={rowSelection}\n            onCheckedRowsChange={handleRowCheckChange}\n            onRowClick={handleRowClick}\n            // infiniteScrollOptions={{\n            //   skip,\n            //   scrollOffset,\n            //   onLoadMore: handleLoadMore,\n            //   totalCount: semiInfiniteData.length,\n            // }}\n            // sortBy={sortBy}\n            // onSort={handleSort}\n          >\n            <Column align=\"left\" dataKey=\"id\" width={width} sortable>\n              <HeaderCell id=\"id\">Id</HeaderCell>\n              <Cell />\n            </Column>\n            <Column dataKey=\"firstName\" width={width}>\n              <HeaderCell id=\"firstname\">First name</HeaderCell>\n              <Cell />\n            </Column>\n            <Column dataKey=\"lastName\" width={width}>\n              <HeaderCell id=\"lastname\">Last name</HeaderCell>\n              <Cell />\n            </Column>\n            <Column dataKey=\"email\" width={width}>\n              <HeaderCell id=\"email\">Email</HeaderCell>\n              <Cell />\n            </Column>\n\n            <Column dataKey=\"createdAt\" width={width}>\n              <HeaderCell id=\"createdAt\">created At</HeaderCell>\n              <Cell />\n            </Column>\n\n            {/* <Column dataKey=\"periodStartDate\" width={width} sortable>\n              <HeaderCell id=\"startdate\">Date Cell</HeaderCell>\n              <DateCell />\n            </Column>\n            <Column dataKey=\"periodEndDate\" width={width} sortable>\n              <HeaderCell id=\"enddate\">DateTime Cell</HeaderCell>\n              <DateTimeCell />\n            </Column> */}\n          </Table>\n        </Section>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}