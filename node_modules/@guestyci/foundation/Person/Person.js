"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.useStyles = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _classnames = _interopRequireDefault(require("classnames"));

var _TextField = _interopRequireDefault(require("../TextField"));

var _Row = _interopRequireDefault(require("../Layout/Row"));

var _Avatar = _interopRequireDefault(require("../Avatar"));

var _createStyles = _interopRequireDefault(require("../createStyles"));

var _Col = _interopRequireDefault(require("../Layout/Col"));

var _ReturningGuestBadge = _interopRequireDefault(require("./ReturningGuestBadge"));

var _utils = require("../utils");

var useStyles = (0, _createStyles["default"])(function (theme) {
  return {
    root: {},
    description: {
      color: theme.palette.description
    },
    badge: {
      position: 'absolute',
      bottom: -2,
      right: -6
    },
    initials: {
      backgroundColor: theme.palette.secondary["default"]
    },
    initialsText: {
      color: 'white',
      textTransform: 'uppercase'
    }
  };
}, {
  name: 'Person'
});
exports.useStyles = useStyles;

var Person = _react["default"].forwardRef(function Person(_ref, ref) {
  var _ref$img = _ref.img,
      img = _ref$img === void 0 ? '' : _ref$img,
      name = _ref.name,
      _ref$description = _ref.description,
      description = _ref$description === void 0 ? '' : _ref$description,
      _ref$returningGuest = _ref.returningGuest,
      returningGuest = _ref$returningGuest === void 0 ? false : _ref$returningGuest,
      _ref$className = _ref.className,
      className = _ref$className === void 0 ? '' : _ref$className,
      _ref$style = _ref.style,
      style = _ref$style === void 0 ? {} : _ref$style,
      _ref$jss = _ref.jss,
      jss = _ref$jss === void 0 ? {} : _ref$jss,
      props = (0, _objectWithoutProperties2["default"])(_ref, ["img", "name", "description", "returningGuest", "className", "style", "jss"]);
  var classes = useStyles({
    jss: jss
  });
  var initials = (0, _react.useMemo)(function () {
    return img ? '' : (0, _utils.nameToInitials)(name);
  }, [img]);
  return /*#__PURE__*/_react["default"].createElement(_Row["default"], (0, _extends2["default"])({}, props, {
    style: style,
    className: (0, _classnames["default"])(classes.root, className),
    ref: ref,
    spacing: 2,
    fullWidth: true,
    justify: "start",
    align: "center"
  }), /*#__PURE__*/_react["default"].createElement(_Avatar["default"], {
    src: img,
    className: (0, _classnames["default"])((0, _defineProperty2["default"])({}, classes.initials, initials)),
    badge: returningGuest ? /*#__PURE__*/_react["default"].createElement(_ReturningGuestBadge["default"], {
      className: classes.badge
    }) : null
  }, initials && /*#__PURE__*/_react["default"].createElement(_TextField["default"], {
    className: classes.initialsText,
    variant: "h3"
  }, initials)), /*#__PURE__*/_react["default"].createElement(_Col["default"], {
    justify: "center",
    spacing: 1
  }, /*#__PURE__*/_react["default"].createElement(_TextField["default"], null, name), description && /*#__PURE__*/_react["default"].createElement(_TextField["default"], {
    variant: "h5",
    className: classes.description
  }, description)));
});

Person.propTypes = {
  /** Image url for person avatar */
  img: _propTypes["default"].string,

  /** Person name */
  name: _propTypes["default"].node.isRequired,

  /** Subtitle for person */
  description: _propTypes["default"].node,

  /** Additional class for person */
  className: _propTypes["default"].string,

  /** Additional style for person */
  style: _propTypes["default"].shape(),

  /** jss override object to customize the jss classes */
  jss: _propTypes["default"].oneOfType([_propTypes["default"].shape(), _propTypes["default"].func]),

  /** Indicator for returning guest badge */
  returningGuest: _propTypes["default"].bool
};
Person.displayName = 'Person';
var _default = Person;
exports["default"] = _default;