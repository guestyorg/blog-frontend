{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n/* eslint-disable global-require */\n\nimport queryParser from 'querystring';\nimport reactIntl from \"../react-intl\";\n\nvar localeDataURL = function localeDataURL(lang) {\n  return \"https://d2g7j5hs6q3xyb.cloudfront.net/production/atomic-design/localesInit/scripts/\".concat(lang, \".js\");\n};\n\nvar localeJsonURL = function localeJsonURL(lang) {\n  return \"https://d2g7j5hs6q3xyb.cloudfront.net/production/atomic-design/localesInit/locales1/\".concat(lang, \".json\");\n};\n\nexport var warningHandler = console.warn.bind(console);\nexport var getLanguage = function getLanguage() {\n  var query = window.location.search.split('?');\n  var queryLang;\n\n  if (query.length >= 2) {\n    var params = queryParser.parse(query[1]);\n    queryLang = params && params.lang ? params.lang : undefined;\n  }\n\n  return queryLang || window.localStorage.getItem('lang') || 'en-US';\n};\nvar get = reactIntl.get,\n    getHTML = reactIntl.getHTML,\n    formatHTMLMessage = reactIntl.formatHTMLMessage,\n    formatMessage = reactIntl.formatMessage,\n    determineLocale = reactIntl.determineLocale,\n    load = reactIntl.load,\n    loadRemoteScript = reactIntl.loadRemoteScript,\n    getLocaleFromCookie = reactIntl.getLocaleFromCookie,\n    getDescendantProp = reactIntl.getDescendantProp,\n    getLocaleFromURL = reactIntl.getLocaleFromURL,\n    getLocaleFromBrowser = reactIntl.getLocaleFromBrowser;\nexport var init = function init(options) {\n  var _options$fallbackLoca, fallbackLocale, locale, _options$debug, debug, langs, promises, responses, _locales;\n\n  return _regeneratorRuntime.async(function init$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _options$fallbackLoca = options.fallbackLocale, fallbackLocale = _options$fallbackLoca === void 0 ? 'en-US' : _options$fallbackLoca, locale = options.currentLocale, _options$debug = options.debug, debug = _options$debug === void 0 ? false : _options$debug;\n          langs = _toConsumableArray(new Set([locale, fallbackLocale]));\n          _context.prev = 2;\n          promises = langs.map(function (lang) {\n            return fetch(localeJsonURL(lang)).then(function (response) {\n              return response.json();\n            });\n          });\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(Promise.all(promises));\n\n        case 6:\n          responses = _context.sent;\n          _locales = langs.reduce(function (acc, lang, index) {\n            acc[lang] = responses[index];\n            return acc;\n          }, {});\n          console.log({\n            locales: _locales\n          });\n          return _context.abrupt(\"return\", reactIntl.init({\n            locales: _locales,\n            warningHandler: warningHandler,\n            fallbackLocale: fallbackLocale,\n            currentLocale: locale,\n            debug: debug,\n            commonLocaleDataUrls: langs.reduce(function (acc, lang) {\n              var shortLang = lang.split('-')[0].split('_')[0];\n              acc[shortLang] = localeDataURL(shortLang);\n              return acc;\n            }, {})\n          }));\n\n        case 12:\n          _context.prev = 12;\n          _context.t0 = _context[\"catch\"](2);\n          console.warn('[i18n] Warning: Could not load locales, please validate language files');\n          return _context.abrupt(\"return\", _context.t0);\n\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[2, 12]]);\n};\nexport var intl = {\n  init: init,\n  get: get.bind(reactIntl),\n  getHTML: getHTML.bind(reactIntl),\n  formatHTMLMessage: formatHTMLMessage.bind(reactIntl),\n  formatMessage: formatMessage.bind(reactIntl),\n  determineLocale: determineLocale.bind(reactIntl),\n  load: load.bind(reactIntl),\n  loadRemoteScript: loadRemoteScript.bind(reactIntl),\n  getLocaleFromCookie: getLocaleFromCookie.bind(reactIntl),\n  getDescendantProp: getDescendantProp.bind(reactIntl),\n  getLocaleFromURL: getLocaleFromURL.bind(reactIntl),\n  getLocaleFromBrowser: getLocaleFromBrowser.bind(reactIntl)\n};\nexport var locales = {};","map":{"version":3,"sources":["/Users/giladdekel/Workspace/Guesty/simple-app-archive/node_modules/@guestyci/localize/esm/utils/i18nUtility.js"],"names":["_regeneratorRuntime","_toConsumableArray","queryParser","reactIntl","localeDataURL","lang","concat","localeJsonURL","warningHandler","console","warn","bind","getLanguage","query","window","location","search","split","queryLang","length","params","parse","undefined","localStorage","getItem","get","getHTML","formatHTMLMessage","formatMessage","determineLocale","load","loadRemoteScript","getLocaleFromCookie","getDescendantProp","getLocaleFromURL","getLocaleFromBrowser","init","options","_options$fallbackLoca","fallbackLocale","locale","_options$debug","debug","langs","promises","responses","_locales","async","init$","_context","prev","next","currentLocale","Set","map","fetch","then","response","json","awrap","Promise","all","sent","reduce","acc","index","log","locales","abrupt","commonLocaleDataUrls","shortLang","t0","stop","intl"],"mappings":"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","sourcesContent":["import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\n/* eslint-disable global-require */\nimport queryParser from 'querystring';\nimport reactIntl from \"../react-intl\";\n\nvar localeDataURL = function localeDataURL(lang) {\n  return \"https://d2g7j5hs6q3xyb.cloudfront.net/production/atomic-design/localesInit/scripts/\".concat(lang, \".js\");\n};\n\nvar localeJsonURL = function localeJsonURL(lang) {\n  return \"https://d2g7j5hs6q3xyb.cloudfront.net/production/atomic-design/localesInit/locales1/\".concat(lang, \".json\");\n};\n\nexport var warningHandler = console.warn.bind(console);\nexport var getLanguage = function getLanguage() {\n  var query = window.location.search.split('?');\n  var queryLang;\n\n  if (query.length >= 2) {\n    var params = queryParser.parse(query[1]);\n    queryLang = params && params.lang ? params.lang : undefined;\n  }\n\n  return queryLang || window.localStorage.getItem('lang') || 'en-US';\n};\nvar get = reactIntl.get,\n    getHTML = reactIntl.getHTML,\n    formatHTMLMessage = reactIntl.formatHTMLMessage,\n    formatMessage = reactIntl.formatMessage,\n    determineLocale = reactIntl.determineLocale,\n    load = reactIntl.load,\n    loadRemoteScript = reactIntl.loadRemoteScript,\n    getLocaleFromCookie = reactIntl.getLocaleFromCookie,\n    getDescendantProp = reactIntl.getDescendantProp,\n    getLocaleFromURL = reactIntl.getLocaleFromURL,\n    getLocaleFromBrowser = reactIntl.getLocaleFromBrowser;\nexport var init = function init(options) {\n  var _options$fallbackLoca, fallbackLocale, locale, _options$debug, debug, langs, promises, responses, _locales;\n\n  return _regeneratorRuntime.async(function init$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _options$fallbackLoca = options.fallbackLocale, fallbackLocale = _options$fallbackLoca === void 0 ? 'en-US' : _options$fallbackLoca, locale = options.currentLocale, _options$debug = options.debug, debug = _options$debug === void 0 ? false : _options$debug;\n          langs = _toConsumableArray(new Set([locale, fallbackLocale]));\n          _context.prev = 2;\n          promises = langs.map(function (lang) {\n            return fetch(localeJsonURL(lang)).then(function (response) {\n              return response.json();\n            });\n          });\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(Promise.all(promises));\n\n        case 6:\n          responses = _context.sent;\n          _locales = langs.reduce(function (acc, lang, index) {\n            acc[lang] = responses[index];\n            return acc;\n          }, {});\n          console.log({\n            locales: _locales\n          });\n          return _context.abrupt(\"return\", reactIntl.init({\n            locales: _locales,\n            warningHandler: warningHandler,\n            fallbackLocale: fallbackLocale,\n            currentLocale: locale,\n            debug: debug,\n            commonLocaleDataUrls: langs.reduce(function (acc, lang) {\n              var shortLang = lang.split('-')[0].split('_')[0];\n              acc[shortLang] = localeDataURL(shortLang);\n              return acc;\n            }, {})\n          }));\n\n        case 12:\n          _context.prev = 12;\n          _context.t0 = _context[\"catch\"](2);\n          console.warn('[i18n] Warning: Could not load locales, please validate language files');\n          return _context.abrupt(\"return\", _context.t0);\n\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[2, 12]]);\n};\nexport var intl = {\n  init: init,\n  get: get.bind(reactIntl),\n  getHTML: getHTML.bind(reactIntl),\n  formatHTMLMessage: formatHTMLMessage.bind(reactIntl),\n  formatMessage: formatMessage.bind(reactIntl),\n  determineLocale: determineLocale.bind(reactIntl),\n  load: load.bind(reactIntl),\n  loadRemoteScript: loadRemoteScript.bind(reactIntl),\n  getLocaleFromCookie: getLocaleFromCookie.bind(reactIntl),\n  getDescendantProp: getDescendantProp.bind(reactIntl),\n  getLocaleFromURL: getLocaleFromURL.bind(reactIntl),\n  getLocaleFromBrowser: getLocaleFromBrowser.bind(reactIntl)\n};\nexport var locales = {};"]},"metadata":{},"sourceType":"module"}