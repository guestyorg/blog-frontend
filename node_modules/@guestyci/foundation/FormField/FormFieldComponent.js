"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _FormControl = _interopRequireDefault(require("../FormControl"));

var FormFieldComponent = function FormFieldComponent(_ref) {
  var children = _ref.children,
      input = _ref.input,
      label = _ref.label,
      info = _ref.info,
      className = _ref.className,
      meta = _ref.meta,
      _ref$input = _ref.input,
      name = _ref$input.name,
      inputValue = _ref$input.value,
      style = _ref.style,
      required = _ref.required;

  var onChangeValue = function onChangeValue() {
    var _children$props = children.props,
        onChange = _children$props.onChange,
        onSelect = _children$props.onSelect;

    if (onChange) {
      onChange.apply(void 0, arguments);
    }

    if (onSelect) {
      onSelect.apply(void 0, arguments);
    }

    input.onChange.apply(input, arguments);
  };

  var handleFocus = function handleFocus() {
    input.onFocus();
  };

  var handleBlur = function handleBlur() {
    input.onBlur();
  };

  var disabled = children.props.disabled;
  var error = meta.error,
      touched = meta.touched,
      active = meta.active;
  var showError = error && touched && !active;
  var errorMessage = showError ? error : '';
  return /*#__PURE__*/_react["default"].createElement(_FormControl["default"], {
    info: info,
    error: errorMessage,
    label: label,
    onFocus: handleFocus,
    onBlur: handleBlur,
    className: className,
    style: style,
    name: name,
    required: required,
    "data-qa": "form-field-component"
  }, _react["default"].cloneElement(children, {
    disabled: disabled,
    onChange: onChangeValue,
    value: inputValue
  }));
};

FormFieldComponent.defaultProps = {
  className: '',
  label: null,
  info: null,
  style: {},
  required: false
};
FormFieldComponent.propTypes = {
  children: _propTypes["default"].node.isRequired,
  required: _propTypes["default"].bool,
  label: _propTypes["default"].string,
  info: _propTypes["default"].string,
  className: _propTypes["default"].string,
  style: _propTypes["default"].shape(),
  input: _propTypes["default"].shape().isRequired,
  meta: _propTypes["default"].shape().isRequired
};
FormFieldComponent.displayName = 'FormFieldComponent';
var _default = FormFieldComponent;
exports["default"] = _default;