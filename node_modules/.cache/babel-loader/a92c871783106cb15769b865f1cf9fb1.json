{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect, useCallback, useRef, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport isNumber from 'lodash/isNumber';\nimport { isEmpty } from '@guestyci/foundation/utils';\nimport createStyles from '@guestyci/foundation/createStyles';\nimport history from \"../utils\";\nimport ActiveTabBottomBorder from \"./ActiveTabBottomBorder\";\nimport useComponentSize from \"../utils/hooks/useSizeHook\";\nvar useStyles = createStyles(function (theme) {\n  return {\n    root: {\n      color: theme.palette.text.running\n    },\n    active: {\n      color: theme.palette.brand.primary\n    },\n    borderBottom: {\n      borderBottom: \"2px solid \".concat(theme.palette.border)\n    }\n  };\n}, {\n  name: 'NavTabs'\n});\n\nvar getExactValueIndex = function getExactValueIndex(tabs, value) {\n  return tabs.findIndex(function (tab) {\n    return tab.getAttribute('href') === value;\n  });\n};\n\nvar getClosestMatchValueIndex = function getClosestMatchValueIndex(tabs, url) {\n  var result = -1;\n  var longestMatch = -1;\n  tabs.forEach(function (tab, indexInArray) {\n    var path = tab.getAttribute('href');\n    var tabPathIndex = path.startsWith('/') && path.length > 1 ? 1 : 0;\n    var matchIndex = -1;\n\n    while (matchIndex < url.length - 1 && url.charAt(tabPathIndex) === path.charAt(tabPathIndex)) {\n      matchIndex += 1;\n      tabPathIndex += 1;\n    }\n\n    if (matchIndex > longestMatch) {\n      longestMatch = matchIndex;\n      result = indexInArray;\n    }\n  });\n  return result;\n};\n\nvar Tabs = function Tabs(_ref) {\n  var children = _ref.children,\n      className = _ref.className,\n      style = _ref.style,\n      exact = _ref.exact,\n      noBorderBottom = _ref.noBorderBottom,\n      fullWidth = _ref.fullWidth,\n      activePathname = _ref.activePathname,\n      noAnimate = _ref.noAnimate,\n      onChange = _ref.onChange;\n  var classes = useStyles();\n  var tabsRef = useRef();\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isBootstrap = _useState2[0],\n      setIsBootstrap = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeIndex = _useState4[0],\n      setActiveIndex = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      borderWidth = _useState6[0],\n      setBorderWidth = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      position = _useState8[0],\n      setPosition = _useState8[1];\n\n  var tabsSize = useComponentSize(tabsRef, !isEmpty(activeIndex));\n  useEffect(function () {\n    var url = history.getPathName();\n    setControlledPosition(url);\n    setIsBootstrap(false);\n  }, []);\n  useEffect(function () {\n    setControlledPosition(activePathname);\n  }, [activePathname]);\n  useEffect(function () {\n    if (!isEmpty(activeIndex)) {\n      setActiveIndexBorderWidth();\n    }\n  }, [activeIndex, tabsSize]);\n  useEffect(function () {\n    if (!isBootstrap) {\n      var timeout = setTimeout(function () {\n        var url = activePathname || history.getPathName();\n        setActiveIndexBorderWidth();\n        setControlledPosition(url);\n      }, 155);\n      return function () {\n        return clearTimeout(timeout);\n      };\n    }\n  }, [children.length]);\n  var setControlledPosition = useCallback(function (value) {\n    var tabs = tabsRef.current.getElementsByClassName('tab-item');\n    var stringValue = String(value);\n    var tabsArray = Array.from(tabs);\n    var index = exact ? getExactValueIndex(tabsArray, stringValue) : getClosestMatchValueIndex(tabsArray, stringValue);\n\n    if (index > -1) {\n      setActiveIndex(index);\n    }\n  }, [tabsRef.current]);\n  var setActiveIndexBorderWidth = useCallback(function () {\n    var tabs = tabsRef.current.getElementsByClassName('tab-item');\n    var activeChild = tabs[activeIndex];\n\n    if (activeChild) {\n      setBorderWidth(activeChild.offsetWidth);\n      setPosition(activeChild.offsetLeft);\n    }\n  }, [activeIndex, tabsRef.current]);\n  var changeTab = useCallback(function (_ref2) {\n    var tabIndex = _ref2.tabIndex,\n        to = _ref2.to,\n        value = _ref2.value;\n    setActiveIndex(tabIndex);\n    history.push(to);\n\n    if (onChange) {\n      var tabProps = {\n        to: to,\n        activeTabIndex: tabIndex,\n        value: value\n      };\n      onChange(tabProps);\n    }\n  });\n  var validChildren = useMemo(function () {\n    return React.Children.toArray(children).filter(React.isValidElement);\n  }, [children]);\n\n  var isActiveIndex = function isActiveIndex(index) {\n    return index === activeIndex;\n  };\n\n  var borderClass = !noBorderBottom ? classes.borderBottom : 'bb-2 border-transparent';\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('d-flex-fill', 'relative', 'flex-column', {\n      'w-fill': fullWidth\n    }, className),\n    ref: tabsRef,\n    style: style\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('tabs-wrapper d-flex text-uppercase min-height-50 h-fill', classes.root, borderClass)\n  }, validChildren.map(function (child, index) {\n    return /*#__PURE__*/React.cloneElement(child, {\n      onClick: changeTab,\n      className: index !== validChildren.length - 1 ? 'mr-5' : '',\n      tabIndex: index,\n      isActive: isActiveIndex(index)\n    });\n  })), isNumber(activeIndex) && isNumber(position) && /*#__PURE__*/React.createElement(ActiveTabBottomBorder, {\n    width: borderWidth,\n    position: position,\n    noAnimate: noAnimate\n  }));\n};\n\nTabs.defaultProps = {\n  onChange: null,\n  className: '',\n  style: {},\n  noBorderBottom: false,\n  noAnimate: false,\n  fullWidth: false,\n  exact: true,\n  activePathname: null\n};\nTabs.propTypes = {\n  /** The tabs children array to render */\n  children: PropTypes.node.isRequired,\n\n  /** Callback for on tab change payload:{ activeTabIndex, value (as passed in tab) } */\n  onChange: PropTypes.func,\n\n  /** Additional class to tabs root */\n  className: PropTypes.string,\n\n  /** Additional style to tabs root */\n  style: PropTypes.shape(),\n\n  /** Indicator whether or not to show the bottom line for the tabs */\n  noBorderBottom: PropTypes.bool,\n\n  /** Indicator whether or not to animate change */\n  noAnimate: PropTypes.bool,\n\n  /** Boolean indicator for parent full width */\n  fullWidth: PropTypes.bool,\n\n  /** match route by exact value or closest match */\n  exact: PropTypes.bool,\n\n  /** controlled value to pass to tabs */\n  activePathname: PropTypes.string\n};\nexport default Tabs;","map":{"version":3,"sources":["/Users/giladdekel/Workspace/Guesty/boilplate/simple-app/simple-app-archive/node_modules/@guestyci/history/esm/NavTabs/Tabs.js"],"names":["_slicedToArray","React","useState","useEffect","useCallback","useRef","useMemo","PropTypes","cn","isNumber","isEmpty","createStyles","history","ActiveTabBottomBorder","useComponentSize","useStyles","theme","root","color","palette","text","running","active","brand","primary","borderBottom","concat","border","name","getExactValueIndex","tabs","value","findIndex","tab","getAttribute","getClosestMatchValueIndex","url","result","longestMatch","forEach","indexInArray","path","tabPathIndex","startsWith","length","matchIndex","charAt","Tabs","_ref","children","className","style","exact","noBorderBottom","fullWidth","activePathname","noAnimate","onChange","classes","tabsRef","_useState","_useState2","isBootstrap","setIsBootstrap","_useState3","_useState4","activeIndex","setActiveIndex","_useState5","_useState6","borderWidth","setBorderWidth","_useState7","_useState8","position","setPosition","tabsSize","getPathName","setControlledPosition","setActiveIndexBorderWidth","timeout","setTimeout","clearTimeout","current","getElementsByClassName","stringValue","String","tabsArray","Array","from","index","activeChild","offsetWidth","offsetLeft","changeTab","_ref2","tabIndex","to","push","tabProps","activeTabIndex","validChildren","Children","toArray","filter","isValidElement","isActiveIndex","borderClass","createElement","ref","map","child","cloneElement","onClick","isActive","width","defaultProps","propTypes","node","isRequired","func","string","shape","bool"],"mappings":"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","sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect, useCallback, useRef, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport isNumber from 'lodash/isNumber';\nimport { isEmpty } from '@guestyci/foundation/utils';\nimport createStyles from '@guestyci/foundation/createStyles';\nimport history from \"../utils\";\nimport ActiveTabBottomBorder from \"./ActiveTabBottomBorder\";\nimport useComponentSize from \"../utils/hooks/useSizeHook\";\nvar useStyles = createStyles(function (theme) {\n  return {\n    root: {\n      color: theme.palette.text.running\n    },\n    active: {\n      color: theme.palette.brand.primary\n    },\n    borderBottom: {\n      borderBottom: \"2px solid \".concat(theme.palette.border)\n    }\n  };\n}, {\n  name: 'NavTabs'\n});\n\nvar getExactValueIndex = function getExactValueIndex(tabs, value) {\n  return tabs.findIndex(function (tab) {\n    return tab.getAttribute('href') === value;\n  });\n};\n\nvar getClosestMatchValueIndex = function getClosestMatchValueIndex(tabs, url) {\n  var result = -1;\n  var longestMatch = -1;\n  tabs.forEach(function (tab, indexInArray) {\n    var path = tab.getAttribute('href');\n    var tabPathIndex = path.startsWith('/') && path.length > 1 ? 1 : 0;\n    var matchIndex = -1;\n\n    while (matchIndex < url.length - 1 && url.charAt(tabPathIndex) === path.charAt(tabPathIndex)) {\n      matchIndex += 1;\n      tabPathIndex += 1;\n    }\n\n    if (matchIndex > longestMatch) {\n      longestMatch = matchIndex;\n      result = indexInArray;\n    }\n  });\n  return result;\n};\n\nvar Tabs = function Tabs(_ref) {\n  var children = _ref.children,\n      className = _ref.className,\n      style = _ref.style,\n      exact = _ref.exact,\n      noBorderBottom = _ref.noBorderBottom,\n      fullWidth = _ref.fullWidth,\n      activePathname = _ref.activePathname,\n      noAnimate = _ref.noAnimate,\n      onChange = _ref.onChange;\n  var classes = useStyles();\n  var tabsRef = useRef();\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isBootstrap = _useState2[0],\n      setIsBootstrap = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeIndex = _useState4[0],\n      setActiveIndex = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      borderWidth = _useState6[0],\n      setBorderWidth = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      position = _useState8[0],\n      setPosition = _useState8[1];\n\n  var tabsSize = useComponentSize(tabsRef, !isEmpty(activeIndex));\n  useEffect(function () {\n    var url = history.getPathName();\n    setControlledPosition(url);\n    setIsBootstrap(false);\n  }, []);\n  useEffect(function () {\n    setControlledPosition(activePathname);\n  }, [activePathname]);\n  useEffect(function () {\n    if (!isEmpty(activeIndex)) {\n      setActiveIndexBorderWidth();\n    }\n  }, [activeIndex, tabsSize]);\n  useEffect(function () {\n    if (!isBootstrap) {\n      var timeout = setTimeout(function () {\n        var url = activePathname || history.getPathName();\n        setActiveIndexBorderWidth();\n        setControlledPosition(url);\n      }, 155);\n      return function () {\n        return clearTimeout(timeout);\n      };\n    }\n  }, [children.length]);\n  var setControlledPosition = useCallback(function (value) {\n    var tabs = tabsRef.current.getElementsByClassName('tab-item');\n    var stringValue = String(value);\n    var tabsArray = Array.from(tabs);\n    var index = exact ? getExactValueIndex(tabsArray, stringValue) : getClosestMatchValueIndex(tabsArray, stringValue);\n\n    if (index > -1) {\n      setActiveIndex(index);\n    }\n  }, [tabsRef.current]);\n  var setActiveIndexBorderWidth = useCallback(function () {\n    var tabs = tabsRef.current.getElementsByClassName('tab-item');\n    var activeChild = tabs[activeIndex];\n\n    if (activeChild) {\n      setBorderWidth(activeChild.offsetWidth);\n      setPosition(activeChild.offsetLeft);\n    }\n  }, [activeIndex, tabsRef.current]);\n  var changeTab = useCallback(function (_ref2) {\n    var tabIndex = _ref2.tabIndex,\n        to = _ref2.to,\n        value = _ref2.value;\n    setActiveIndex(tabIndex);\n    history.push(to);\n\n    if (onChange) {\n      var tabProps = {\n        to: to,\n        activeTabIndex: tabIndex,\n        value: value\n      };\n      onChange(tabProps);\n    }\n  });\n  var validChildren = useMemo(function () {\n    return React.Children.toArray(children).filter(React.isValidElement);\n  }, [children]);\n\n  var isActiveIndex = function isActiveIndex(index) {\n    return index === activeIndex;\n  };\n\n  var borderClass = !noBorderBottom ? classes.borderBottom : 'bb-2 border-transparent';\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('d-flex-fill', 'relative', 'flex-column', {\n      'w-fill': fullWidth\n    }, className),\n    ref: tabsRef,\n    style: style\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cn('tabs-wrapper d-flex text-uppercase min-height-50 h-fill', classes.root, borderClass)\n  }, validChildren.map(function (child, index) {\n    return /*#__PURE__*/React.cloneElement(child, {\n      onClick: changeTab,\n      className: index !== validChildren.length - 1 ? 'mr-5' : '',\n      tabIndex: index,\n      isActive: isActiveIndex(index)\n    });\n  })), isNumber(activeIndex) && isNumber(position) && /*#__PURE__*/React.createElement(ActiveTabBottomBorder, {\n    width: borderWidth,\n    position: position,\n    noAnimate: noAnimate\n  }));\n};\n\nTabs.defaultProps = {\n  onChange: null,\n  className: '',\n  style: {},\n  noBorderBottom: false,\n  noAnimate: false,\n  fullWidth: false,\n  exact: true,\n  activePathname: null\n};\nTabs.propTypes = {\n  /** The tabs children array to render */\n  children: PropTypes.node.isRequired,\n\n  /** Callback for on tab change payload:{ activeTabIndex, value (as passed in tab) } */\n  onChange: PropTypes.func,\n\n  /** Additional class to tabs root */\n  className: PropTypes.string,\n\n  /** Additional style to tabs root */\n  style: PropTypes.shape(),\n\n  /** Indicator whether or not to show the bottom line for the tabs */\n  noBorderBottom: PropTypes.bool,\n\n  /** Indicator whether or not to animate change */\n  noAnimate: PropTypes.bool,\n\n  /** Boolean indicator for parent full width */\n  fullWidth: PropTypes.bool,\n\n  /** match route by exact value or closest match */\n  exact: PropTypes.bool,\n\n  /** controlled value to pass to tabs */\n  activePathname: PropTypes.string\n};\nexport default Tabs;"]},"metadata":{},"sourceType":"module"}