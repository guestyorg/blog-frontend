"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.useStyles = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _react = _interopRequireWildcard(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _noop = _interopRequireDefault(require("lodash/noop"));

var _Row = _interopRequireDefault(require("../Layout/Row"));

var _createStyles = _interopRequireDefault(require("../createStyles"));

var _styles = _interopRequireDefault(require("./styles"));

var useStyles = (0, _createStyles["default"])(function (theme) {
  return {
    root: (0, _extends2["default"])({}, theme.typography.primary, {}, _styles["default"].shared(theme), {
      '&:hover': _styles["default"].hover(theme),
      height: '46px'
    }),
    input: {
      border: 'none',
      height: '100%',
      width: '100%',
      backgroundColor: 'transparent',
      '&::placeholder': _styles["default"].placeholder(theme)
    },
    disabled: _styles["default"].disabled(theme),
    focused: _styles["default"].focused(theme),
    error: _styles["default"].error(theme),
    prefix: {
      height: '100%',
      display: 'flex',
      alignItems: 'center'
    },
    suffix: {
      height: '100%',
      display: 'flex',
      alignItems: 'center'
    }
  };
}, {
  name: 'Input'
});
exports.useStyles = useStyles;

var Input = _react["default"].forwardRef(function Input(_ref, ref) {
  var _cn;

  var name = _ref.name,
      value = _ref.value,
      placeholder = _ref.placeholder,
      disabled = _ref.disabled,
      onChange = _ref.onChange,
      className = _ref.className,
      style = _ref.style,
      suffix = _ref.suffix,
      prefix = _ref.prefix,
      onFocus = _ref.onFocus,
      onBlur = _ref.onBlur,
      error = _ref.error,
      jss = _ref.jss,
      props = (0, _objectWithoutProperties2["default"])(_ref, ["name", "value", "placeholder", "disabled", "onChange", "className", "style", "suffix", "prefix", "onFocus", "onBlur", "error", "jss"]);
  var classes = useStyles({
    jss: jss
  });

  var _useState = (0, _react.useState)(false),
      _useState2 = (0, _slicedToArray2["default"])(_useState, 2),
      focused = _useState2[0],
      setFocused = _useState2[1];

  var onInputFocus = function onInputFocus() {
    setFocused(true);

    if (onFocus) {
      onFocus.apply(void 0, arguments);
    }
  };

  var onInputBlur = function onInputBlur() {
    setFocused(false);

    if (onBlur) {
      onBlur.apply(void 0, arguments);
    }
  };

  return /*#__PURE__*/_react["default"].createElement(_Row["default"], {
    wrap: false,
    justify: "between",
    align: "center",
    className: (0, _classnames["default"])(classes.root, (_cn = {}, (0, _defineProperty2["default"])(_cn, classes.disabled, disabled), (0, _defineProperty2["default"])(_cn, classes.focused, focused), (0, _defineProperty2["default"])(_cn, classes.error, error), _cn), className)
  }, prefix && /*#__PURE__*/_react["default"].createElement("span", {
    className: classes.prefix
  }, prefix), /*#__PURE__*/_react["default"].createElement("input", (0, _extends2["default"])({
    onChange: onChange,
    onFocus: onInputFocus,
    onBlur: onInputBlur,
    name: name,
    value: value,
    className: (0, _classnames["default"])(classes.input),
    disabled: disabled,
    placeholder: placeholder,
    ref: ref
  }, props)), suffix && /*#__PURE__*/_react["default"].createElement("span", {
    className: classes.suffix
  }, suffix));
});

Input.defaultProps = {
  name: '',
  value: '',
  onChange: _noop["default"],
  placeholder: '',
  className: '',
  style: undefined,
  suffix: null,
  disabled: false
};
Input.propTypes = {
  /** Input name to be set */
  name: _propTypes["default"].string,

  /** Input value to be set */
  value: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].number]),

  /** Input placeholder text */
  placeholder: _propTypes["default"].string,

  /** Disable state in which input interaction is not available */
  disabled: _propTypes["default"].bool,

  /** Function to be called on input value change */
  onChange: _propTypes["default"].func,

  /** Input class */
  className: _propTypes["default"].string,

  /** Input style */
  style: _propTypes["default"].shape(),

  /** String Or React Element to be shown before the input */
  prefix: _propTypes["default"].node,

  /** String Or React Element to be shown after the input */
  suffix: _propTypes["default"].node,

  /** jss override object to customize the jss classes */
  jss: _propTypes["default"].oneOfType([_propTypes["default"].shape(), _propTypes["default"].func])
};
Input.displayName = 'Input';
var _default = Input;
exports["default"] = _default;