{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _isEmpty = _interopRequireDefault(require(\"lodash/isEmpty\"));\n\nvar _isUndefined = _interopRequireDefault(require(\"lodash/isUndefined\"));\n\nvar _isObject = _interopRequireDefault(require(\"lodash/isObject\"));\n\nvar _debounce = _interopRequireDefault(require(\"lodash/debounce\"));\n\nvar _get = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _withCollapse = _interopRequireDefault(require(\"../Collapse/withCollapse\"));\n\nfunction _createSuper(Derived) {\n  return function () {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n        result;\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar isEqualValue = function isEqualValue(prevValue, value) {\n  if ((0, _isObject[\"default\"])(prevValue) && (0, _isObject[\"default\"])(value)) {\n    return prevValue.value === value.value;\n  }\n\n  return prevValue === value;\n};\n/**\n * Create a wrapper compose to support dropdown functionality\n * @param ComposedComponent\n * @returns {{Component}}\n */\n\n\nvar withDropdown = function withDropdown(ComposedComponent) {\n  var DropdownWrapper = /*#__PURE__*/function (_Component) {\n    (0, _inherits2[\"default\"])(DropdownWrapper, _Component);\n\n    var _super = _createSuper(DropdownWrapper);\n\n    function DropdownWrapper(props) {\n      var _this;\n\n      (0, _classCallCheck2[\"default\"])(this, DropdownWrapper);\n      _this = _super.call(this, props);\n      _this.handleSearchQueryChange = (0, _debounce[\"default\"])(function (val, identifier) {\n        var onSearchQueryChange = _this.props.onSearchQueryChange;\n        onSearchQueryChange(val, identifier);\n      }, 500);\n\n      _this.setSelectedItemControlledValue = function (defaultValue) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var value = {};\n\n        if (!(0, _isUndefined[\"default\"])(defaultValue)) {\n          if (!(0, _isObject[\"default\"])(defaultValue) && !(0, _isEmpty[\"default\"])(options)) {\n            value = options.find(function (option) {\n              return option.value === defaultValue;\n            }) || {\n              label: undefined,\n              value: defaultValue\n            };\n          } else {\n            value = defaultValue;\n          }\n        }\n\n        _this.setSelectedItem(value);\n      };\n\n      _this.handleClickOutside = function () {\n        var _this$props = _this.props,\n            isCollapsed = _this$props.isCollapsed,\n            closeCollapse = _this$props.closeCollapse;\n        var query = _this.state.query;\n\n        if (!isCollapsed) {\n          closeCollapse();\n\n          if (!(0, _isEmpty[\"default\"])(query)) {\n            _this.searchQueryChange('');\n          }\n        }\n      };\n\n      _this.handleLoadMore = function (page) {\n        var onLoadMore = _this.props.onLoadMore;\n        var query = _this.state.query;\n\n        _this.setState({\n          currentPage: page\n        });\n\n        onLoadMore(page, query);\n      };\n\n      _this.handleSelectedItemChange = function (value) {\n        var _this$props2 = _this.props,\n            id = _this$props2.id,\n            name = _this$props2.name,\n            onSelect = _this$props2.onSelect,\n            onChange = _this$props2.onChange;\n\n        if (onSelect) {\n          onSelect(value, id || name);\n        } else if (onChange) {\n          onChange(value, id || name);\n        }\n      };\n\n      _this.handleSelectItem = function () {\n        var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var closeCollapse = _this.props.closeCollapse;\n        closeCollapse();\n\n        _this.setSelectedItem(item);\n\n        _this.handleSelectedItemChange(item.value);\n      };\n\n      _this.clearSelectedItem = function () {\n        _this.handleSelectedItemChange('');\n\n        _this.setSelectedItem({});\n      };\n\n      _this.clearQuery = function () {\n        _this.searchQueryChange('');\n      };\n\n      _this.handleSearchChange = function (e) {\n        var query = e.currentTarget.value;\n        var _this$props3 = _this.props,\n            isCollapsed = _this$props3.isCollapsed,\n            openCollapse = _this$props3.openCollapse;\n\n        if (isCollapsed) {\n          openCollapse();\n        }\n\n        _this.searchQueryChange(query);\n      };\n\n      _this.dropdownRef = _react[\"default\"].createRef();\n      _this.state = {\n        selectedItem: {},\n        query: '',\n        currentPage: props.intialPage || 0,\n        searchInputValue: ''\n      };\n      return _this;\n    }\n\n    (0, _createClass2[\"default\"])(DropdownWrapper, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this$props4 = this.props,\n            value = _this$props4.value,\n            defaultValue = _this$props4.defaultValue,\n            options = _this$props4.options;\n        this.setSelectedItemControlledValue(value || defaultValue, options);\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        var _this$props5 = this.props,\n            defaultValue = _this$props5.defaultValue,\n            options = _this$props5.options,\n            value = _this$props5.value;\n        var selectedItem = this.state.selectedItem;\n\n        if (!isEqualValue(prevProps.defaultValue, defaultValue) && (0, _isEmpty[\"default\"])(selectedItem)) {\n          this.setSelectedItemControlledValue(defaultValue, options);\n        }\n\n        if (!isEqualValue(prevProps.value, value) && !isEqualValue(value, selectedItem)) {\n          this.setSelectedItemControlledValue(value, options);\n        }\n\n        if (options.length !== prevProps.options.length && !selectedItem.label) {\n          this.setSelectedItemControlledValue(selectedItem.value, options);\n        }\n      }\n    }, {\n      key: \"setSelectedItem\",\n      value: function setSelectedItem() {\n        var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        this.setState({\n          selectedItem: item || {},\n          searchInputValue: (0, _isObject[\"default\"])((0, _get[\"default\"])(item, 'label')) ? item.name : (0, _get[\"default\"])(item, 'label')\n        });\n      }\n    }, {\n      key: \"searchQueryChange\",\n      value: function searchQueryChange(val) {\n        var _this$props6 = this.props,\n            id = _this$props6.id,\n            name = _this$props6.name,\n            onSearchQueryChange = _this$props6.onSearchQueryChange;\n        this.setState({\n          query: val,\n          currentPage: 0\n        });\n\n        if (onSearchQueryChange) {\n          this.handleSearchQueryChange(val, id || name);\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$props7 = this.props,\n            containerClassName = _this$props7.containerClassName,\n            onChange = _this$props7.onChange,\n            props = (0, _objectWithoutProperties2[\"default\"])(_this$props7, [\"containerClassName\", \"onChange\"]);\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          ref: this.dropdownRef,\n          className: (0, _classnames[\"default\"])('d-flex w-inherit dropdown-wrapper', containerClassName),\n          \"data-qa\": \"dropdown-wrapper\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(ComposedComponent, (0, _extends2[\"default\"])({}, props, this.state, {\n          onSearchChange: this.handleSearchChange,\n          clearSelectedItem: this.clearSelectedItem,\n          onSelectItem: this.handleSelectItem,\n          onChange: this.handleSelectedItemChange,\n          fetchNextPage: this.handleLoadMore,\n          clearQuery: this.clearQuery,\n          closeDropdown: this.handleClickOutside\n        })));\n      }\n    }]);\n    return DropdownWrapper;\n  }(_react.Component);\n\n  return (0, _withCollapse[\"default\"])(DropdownWrapper);\n};\n\nvar _default = withDropdown;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/giladdekel/Workspace/Guesty/simple-app-archive/node_modules/@guestyci/foundation/legacy/baseDropdown/withDropdown.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","_extends2","_objectWithoutProperties2","_classCallCheck2","_createClass2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_react","_isEmpty","_isUndefined","_isObject","_debounce","_get","_classnames","_withCollapse","_createSuper","Derived","Super","result","_isNativeReflectConstruct","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Date","prototype","toString","call","e","isEqualValue","prevValue","withDropdown","ComposedComponent","DropdownWrapper","_Component","_super","props","_this","handleSearchQueryChange","val","identifier","onSearchQueryChange","setSelectedItemControlledValue","defaultValue","options","length","undefined","find","option","label","setSelectedItem","handleClickOutside","_this$props","isCollapsed","closeCollapse","query","state","searchQueryChange","handleLoadMore","page","onLoadMore","setState","currentPage","handleSelectedItemChange","_this$props2","id","name","onSelect","onChange","handleSelectItem","item","clearSelectedItem","clearQuery","handleSearchChange","currentTarget","_this$props3","openCollapse","dropdownRef","createRef","selectedItem","intialPage","searchInputValue","key","componentDidMount","_this$props4","componentDidUpdate","prevProps","_this$props5","_this$props6","render","_this$props7","containerClassName","createElement","ref","className","onSearchChange","onSelectItem","fetchNextPage","closeDropdown","Component","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _isEmpty = _interopRequireDefault(require(\"lodash/isEmpty\"));\n\nvar _isUndefined = _interopRequireDefault(require(\"lodash/isUndefined\"));\n\nvar _isObject = _interopRequireDefault(require(\"lodash/isObject\"));\n\nvar _debounce = _interopRequireDefault(require(\"lodash/debounce\"));\n\nvar _get = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _withCollapse = _interopRequireDefault(require(\"../Collapse/withCollapse\"));\n\nfunction _createSuper(Derived) { return function () { var Super = (0, _getPrototypeOf2[\"default\"])(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar isEqualValue = function isEqualValue(prevValue, value) {\n  if ((0, _isObject[\"default\"])(prevValue) && (0, _isObject[\"default\"])(value)) {\n    return prevValue.value === value.value;\n  }\n\n  return prevValue === value;\n};\n/**\n * Create a wrapper compose to support dropdown functionality\n * @param ComposedComponent\n * @returns {{Component}}\n */\n\n\nvar withDropdown = function withDropdown(ComposedComponent) {\n  var DropdownWrapper = /*#__PURE__*/function (_Component) {\n    (0, _inherits2[\"default\"])(DropdownWrapper, _Component);\n\n    var _super = _createSuper(DropdownWrapper);\n\n    function DropdownWrapper(props) {\n      var _this;\n\n      (0, _classCallCheck2[\"default\"])(this, DropdownWrapper);\n      _this = _super.call(this, props);\n      _this.handleSearchQueryChange = (0, _debounce[\"default\"])(function (val, identifier) {\n        var onSearchQueryChange = _this.props.onSearchQueryChange;\n        onSearchQueryChange(val, identifier);\n      }, 500);\n\n      _this.setSelectedItemControlledValue = function (defaultValue) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var value = {};\n\n        if (!(0, _isUndefined[\"default\"])(defaultValue)) {\n          if (!(0, _isObject[\"default\"])(defaultValue) && !(0, _isEmpty[\"default\"])(options)) {\n            value = options.find(function (option) {\n              return option.value === defaultValue;\n            }) || {\n              label: undefined,\n              value: defaultValue\n            };\n          } else {\n            value = defaultValue;\n          }\n        }\n\n        _this.setSelectedItem(value);\n      };\n\n      _this.handleClickOutside = function () {\n        var _this$props = _this.props,\n            isCollapsed = _this$props.isCollapsed,\n            closeCollapse = _this$props.closeCollapse;\n        var query = _this.state.query;\n\n        if (!isCollapsed) {\n          closeCollapse();\n\n          if (!(0, _isEmpty[\"default\"])(query)) {\n            _this.searchQueryChange('');\n          }\n        }\n      };\n\n      _this.handleLoadMore = function (page) {\n        var onLoadMore = _this.props.onLoadMore;\n        var query = _this.state.query;\n\n        _this.setState({\n          currentPage: page\n        });\n\n        onLoadMore(page, query);\n      };\n\n      _this.handleSelectedItemChange = function (value) {\n        var _this$props2 = _this.props,\n            id = _this$props2.id,\n            name = _this$props2.name,\n            onSelect = _this$props2.onSelect,\n            onChange = _this$props2.onChange;\n\n        if (onSelect) {\n          onSelect(value, id || name);\n        } else if (onChange) {\n          onChange(value, id || name);\n        }\n      };\n\n      _this.handleSelectItem = function () {\n        var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var closeCollapse = _this.props.closeCollapse;\n        closeCollapse();\n\n        _this.setSelectedItem(item);\n\n        _this.handleSelectedItemChange(item.value);\n      };\n\n      _this.clearSelectedItem = function () {\n        _this.handleSelectedItemChange('');\n\n        _this.setSelectedItem({});\n      };\n\n      _this.clearQuery = function () {\n        _this.searchQueryChange('');\n      };\n\n      _this.handleSearchChange = function (e) {\n        var query = e.currentTarget.value;\n        var _this$props3 = _this.props,\n            isCollapsed = _this$props3.isCollapsed,\n            openCollapse = _this$props3.openCollapse;\n\n        if (isCollapsed) {\n          openCollapse();\n        }\n\n        _this.searchQueryChange(query);\n      };\n\n      _this.dropdownRef = _react[\"default\"].createRef();\n      _this.state = {\n        selectedItem: {},\n        query: '',\n        currentPage: props.intialPage || 0,\n        searchInputValue: ''\n      };\n      return _this;\n    }\n\n    (0, _createClass2[\"default\"])(DropdownWrapper, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this$props4 = this.props,\n            value = _this$props4.value,\n            defaultValue = _this$props4.defaultValue,\n            options = _this$props4.options;\n        this.setSelectedItemControlledValue(value || defaultValue, options);\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        var _this$props5 = this.props,\n            defaultValue = _this$props5.defaultValue,\n            options = _this$props5.options,\n            value = _this$props5.value;\n        var selectedItem = this.state.selectedItem;\n\n        if (!isEqualValue(prevProps.defaultValue, defaultValue) && (0, _isEmpty[\"default\"])(selectedItem)) {\n          this.setSelectedItemControlledValue(defaultValue, options);\n        }\n\n        if (!isEqualValue(prevProps.value, value) && !isEqualValue(value, selectedItem)) {\n          this.setSelectedItemControlledValue(value, options);\n        }\n\n        if (options.length !== prevProps.options.length && !selectedItem.label) {\n          this.setSelectedItemControlledValue(selectedItem.value, options);\n        }\n      }\n    }, {\n      key: \"setSelectedItem\",\n      value: function setSelectedItem() {\n        var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        this.setState({\n          selectedItem: item || {},\n          searchInputValue: (0, _isObject[\"default\"])((0, _get[\"default\"])(item, 'label')) ? item.name : (0, _get[\"default\"])(item, 'label')\n        });\n      }\n    }, {\n      key: \"searchQueryChange\",\n      value: function searchQueryChange(val) {\n        var _this$props6 = this.props,\n            id = _this$props6.id,\n            name = _this$props6.name,\n            onSearchQueryChange = _this$props6.onSearchQueryChange;\n        this.setState({\n          query: val,\n          currentPage: 0\n        });\n\n        if (onSearchQueryChange) {\n          this.handleSearchQueryChange(val, id || name);\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$props7 = this.props,\n            containerClassName = _this$props7.containerClassName,\n            onChange = _this$props7.onChange,\n            props = (0, _objectWithoutProperties2[\"default\"])(_this$props7, [\"containerClassName\", \"onChange\"]);\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          ref: this.dropdownRef,\n          className: (0, _classnames[\"default\"])('d-flex w-inherit dropdown-wrapper', containerClassName),\n          \"data-qa\": \"dropdown-wrapper\"\n        }, /*#__PURE__*/_react[\"default\"].createElement(ComposedComponent, (0, _extends2[\"default\"])({}, props, this.state, {\n          onSearchChange: this.handleSearchChange,\n          clearSelectedItem: this.clearSelectedItem,\n          onSelectItem: this.handleSelectItem,\n          onChange: this.handleSelectedItemChange,\n          fetchNextPage: this.handleLoadMore,\n          clearQuery: this.clearQuery,\n          closeDropdown: this.handleClickOutside\n        })));\n      }\n    }]);\n    return DropdownWrapper;\n  }(_react.Component);\n\n  return (0, _withCollapse[\"default\"])(DropdownWrapper);\n};\n\nvar _default = withDropdown;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}