"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.useStyles = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireWildcard(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _noop = _interopRequireDefault(require("lodash/noop"));

var _commonUtility = require("../utils/commonUtility");

var _Row = _interopRequireDefault(require("../Layout/Row"));

var _TextField = _interopRequireDefault(require("../TextField"));

var _createStyles = _interopRequireDefault(require("../createStyles"));

var _IconButton = _interopRequireDefault(require("../IconButton"));

var _colors = require("../theme/colors");

var _utils = require("../theme/utils");

var useStyles = (0, _createStyles["default"])(function (theme) {
  return {
    root: {
      position: 'relative',
      cursor: 'pointer',
      borderRadius: 10
    },
    "switch": {
      transition: theme.transition.create(),
      position: 'absolute',
      top: 0,
      left: 0,
      right: 0,
      bottom: 0,
      borderRadius: 10,
      backgroundColor: theme.palette.text["default"],
      '&:before': {
        transition: theme.transition.create(),
        content: '""',
        left: 0,
        position: 'absolute',
        height: 14,
        transform: 'translateX(1px)',
        width: 14,
        marginTop: 1,
        borderRadius: '50%',
        backgroundColor: _colors.white
      }
    },
    disabled: {
      cursor: 'not-allowed',
      color: theme.palette.disabledText
    },
    input: {
      cursor: 'inherit',
      position: 'absolute',
      opacity: 0,
      width: '100%',
      height: '100%',
      borderRadius: 3,
      top: 0,
      left: 0,
      margin: 0,
      padding: 0,
      zIndex: 1,
      '&:checked + $switch': {
        backgroundColor: theme.palette.primary["default"],
        '&:before': {
          content: '',
          transform: 'translateX(13px)'
        }
      },
      '&:disabled + $switch': {
        backgroundColor: _colors.gray300
      },
      '&:disabled:checked + $switch': {
        backgroundColor: (0, _utils.fade)(theme.palette.primary["default"], 0.6)
      }
    }
  };
}, {
  name: 'Switch'
});
exports.useStyles = useStyles;
var jssOverrides = {
  iconSm: {
    padding: 0
  },
  root: {
    height: 16,
    width: 28
  }
};

var Switch = _react["default"].forwardRef(function Switch(_ref, ref) {
  var id = _ref.id,
      children = _ref.children,
      value = _ref.value,
      onChange = _ref.onChange,
      checked = _ref.checked,
      disabled = _ref.disabled,
      className = _ref.className,
      style = _ref.style,
      jss = _ref.jss,
      name = _ref.name,
      props = (0, _objectWithoutProperties2["default"])(_ref, ["id", "children", "value", "onChange", "checked", "disabled", "className", "style", "jss", "name"]);
  var classes = useStyles({
    jss: jss
  });
  var inputId = (0, _react.useMemo)(function () {
    return id || (0, _commonUtility.uuid)();
  }, [id]);
  return /*#__PURE__*/_react["default"].createElement("label", {
    htmlFor: inputId,
    ref: ref
  }, /*#__PURE__*/_react["default"].createElement(_Row["default"], {
    spacing: 2,
    align: "center",
    className: (0, _classnames["default"])(classes.root, (0, _defineProperty2["default"])({}, classes.disabled, disabled), className),
    style: style
  }, /*#__PURE__*/_react["default"].createElement(_IconButton["default"], {
    size: "sm",
    color: "primary",
    jss: jssOverrides
  }, /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement("input", (0, _extends2["default"])({}, props, {
    id: inputId,
    type: "checkbox",
    checked: checked,
    disabled: disabled,
    onChange: onChange,
    className: classes.input,
    name: name,
    value: value
  })), /*#__PURE__*/_react["default"].createElement("div", {
    className: classes["switch"]
  }))), children && /*#__PURE__*/_react["default"].createElement(_TextField["default"], null, children)));
});

Switch.propTypes = {
  /** Boolean flag used to set the switch as checked or not */
  checked: _propTypes["default"].bool,

  /** Function to toggle the switch */
  onChange: _propTypes["default"].func,

  /** Boolean indicator to toggle disabled for the switch */
  disabled: _propTypes["default"].bool,

  /** The value to pass on switch click */
  value: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].number, _propTypes["default"].shape()]),

  /** Checkbox name */
  name: _propTypes["default"].string,

  /** Additional class to add to the switch */
  className: _propTypes["default"].string,

  /** Additional style to add to the switch */
  style: _propTypes["default"].shape(),

  /** jss override object to customize the jss classes */
  jss: _propTypes["default"].oneOfType([_propTypes["default"].shape(), _propTypes["default"].func])
};
Switch.defaultProps = {
  disabled: false,
  value: '',
  name: '',
  className: '',
  style: {},
  onChange: _noop["default"],
  checked: false
};
Switch.displayName = 'Switch';
var _default = Switch;
exports["default"] = _default;