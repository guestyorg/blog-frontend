import { createBrowserHistory } from 'history';
import { listener } from "../routerListener/routeListener";
let browserHistory = createBrowserHistory();
/**
 * Create a new browser history and init with params
 * @param params  {Object}  Params for history
 * @return {{createHref, goBack, length, replace, go, action, location, goForward, block, push, listen}}
 */

export function createHistory(params = {}) {
  const {
    baseUrl = '',
    isFragment = true,
    alias
  } = params;
  browserHistory = createBrowserHistory({
    basename: baseUrl
  });
  browserHistory.isFragment = isFragment;
  browserHistory.baseUrl = baseUrl;
  browserHistory.alias = alias;
  browserHistory.unlisten = listener(browserHistory);
  return browserHistory;
}
/**
 * return the history instance
 * @return {{createHref, goBack, length, replace, go, action, location, goForward, block, push, listen}}
 */

export function getHistory() {
  return browserHistory;
}
export default createHistory;