{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseToken = exports.getToken = void 0;\n\nvar _jwtDecode2 = _interopRequireDefault(require(\"jwt-decode\"));\n\nvar getToken = function getToken() {\n  var search = new URL(window.location).searchParams;\n  var token = search.get('token');\n  return token || JSON.parse(window.localStorage.getItem('token'));\n};\n\nexports.getToken = getToken;\n\nvar parseToken = function parseToken(token) {\n  try {\n    var _jwtDecode = (0, _jwtDecode2[\"default\"])(token),\n        iss = _jwtDecode.iss,\n        userRoles = _jwtDecode.userRoles;\n\n    return {\n      parsedEnv: iss.split('.')[0],\n      userRoles: userRoles\n    };\n  } catch (e) {\n    return {};\n  }\n};\n\nexports.parseToken = parseToken;","map":{"version":3,"sources":["/Users/giladdekel/Workspace/Guesty/onboarding-blog/onboarding-blog-app/onboarding-frontend-main/simple-app-archive/node_modules/@guestyci/agni/env-utils.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","parseToken","getToken","_jwtDecode2","search","URL","window","location","searchParams","token","get","JSON","parse","localStorage","getItem","_jwtDecode","iss","userRoles","parsedEnv","split","e"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,UAAR,GAAqBF,OAAO,CAACG,QAAR,GAAmB,KAAK,CAA7C;;AAEA,IAAIC,WAAW,GAAGR,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAxC;;AAEA,IAAIM,QAAQ,GAAG,SAASA,QAAT,GAAoB;AACjC,MAAIE,MAAM,GAAG,IAAIC,GAAJ,CAAQC,MAAM,CAACC,QAAf,EAAyBC,YAAtC;AACA,MAAIC,KAAK,GAAGL,MAAM,CAACM,GAAP,CAAW,OAAX,CAAZ;AACA,SAAOD,KAAK,IAAIE,IAAI,CAACC,KAAL,CAAWN,MAAM,CAACO,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAX,CAAhB;AACD,CAJD;;AAMAf,OAAO,CAACG,QAAR,GAAmBA,QAAnB;;AAEA,IAAID,UAAU,GAAG,SAASA,UAAT,CAAoBQ,KAApB,EAA2B;AAC1C,MAAI;AACF,QAAIM,UAAU,GAAG,CAAC,GAAGZ,WAAW,CAAC,SAAD,CAAf,EAA4BM,KAA5B,CAAjB;AAAA,QACIO,GAAG,GAAGD,UAAU,CAACC,GADrB;AAAA,QAEIC,SAAS,GAAGF,UAAU,CAACE,SAF3B;;AAIA,WAAO;AACLC,MAAAA,SAAS,EAAEF,GAAG,CAACG,KAAJ,CAAU,GAAV,EAAe,CAAf,CADN;AAELF,MAAAA,SAAS,EAAEA;AAFN,KAAP;AAID,GATD,CASE,OAAOG,CAAP,EAAU;AACV,WAAO,EAAP;AACD;AACF,CAbD;;AAeArB,OAAO,CAACE,UAAR,GAAqBA,UAArB","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseToken = exports.getToken = void 0;\n\nvar _jwtDecode2 = _interopRequireDefault(require(\"jwt-decode\"));\n\nvar getToken = function getToken() {\n  var search = new URL(window.location).searchParams;\n  var token = search.get('token');\n  return token || JSON.parse(window.localStorage.getItem('token'));\n};\n\nexports.getToken = getToken;\n\nvar parseToken = function parseToken(token) {\n  try {\n    var _jwtDecode = (0, _jwtDecode2[\"default\"])(token),\n        iss = _jwtDecode.iss,\n        userRoles = _jwtDecode.userRoles;\n\n    return {\n      parsedEnv: iss.split('.')[0],\n      userRoles: userRoles\n    };\n  } catch (e) {\n    return {};\n  }\n};\n\nexports.parseToken = parseToken;"]},"metadata":{},"sourceType":"script"}